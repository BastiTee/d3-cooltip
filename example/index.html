<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>d3-cooltip demo</title>
    <!-- D3v4 basic library -->
    <script src="https://d3js.org/d3.v4.js"></script>
    <!-- Your plugin -->
    <script src="../build/d3-cooltip.js"></script>
</head>

<body>
    <svg id="my-svg"></svg>
</body>
<script>
    d3.csv("data.csv", function(error, data) {
        
        // setup basic canvas
        var widHei = 500
        var dim = widHei / 3
        var svg = d3.select("#my-svg")
            .attr("width", widHei)
            .attr("height", widHei)

        // add a grey background 
        svg.append("rect")
            .attr("width", widHei)
            .attr("height", widHei)
            .attr("fill", "lightgrey")

        // create some rectangles from data 
        svg.selectAll(".rectangles")
            .data(data).enter().append("rect")
            .attr("class", "rectangles")
            .attr("width", dim * 1.5)
            .attr("height", dim * 1.5)
            .attr("x", function(d, i) {
                return (dim / 2) * 1.5 * i
            })
            .attr("y", function(d, i) {
                return (dim / 2) * 1.5 * i
            })
            .attr("fill", function(d) {
                return d["value"]
            })

        // write a callback to define what the cooltip should display
        var cooltipText = function(d) {
            return "This rectangle is\ncolored " + d["value"]
        }

        // create the cooltip and configure it 
        var cooltip = d3.cooltip()
            .color("lightgrey")
            .fill("black")
            .opacity(0.7)
            .padding(10)
            .roundCorners(10)
            .selector(cooltipText)

        // call it for each rectangle
        svg.selectAll(".rectangles").call(cooltip)
        
    })
</script>

</html>